<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/css/bootstrap.min.css" integrity="sha384-r4NyP46KrjDleawBgD5tp8Y7UzmLA05oM1iAEQ17CSuDqnUK2+k9luXQOfXJCJ4I" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js" integrity="sha384-oesi62hOLfzrys4LxRF63OJCXdXDipiYWBnvTl9Y9/TRlw5xlKIEHpNyvvDShgf/" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
<link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />


<div class="container jsjhr">
    <div class="row skfjh">
        <div class="col-md-2 sfjhe">
        </div>
        <div class="col-md-6">
            @* <div class="jfheuf"><textarea name="" id="" cols="3" rows="3" class="form-control" placeholder="Un bookmark nou..."></textarea>
            </div>*@
            @foreach (var item in ViewBag.bkm)
            {

                <div class="box1">
                    <div class="d-flex skfjkk">
                        <div class="pl-2 pt-1">
                            <h6><a href="/User/Bookmarks/@item.u.UserName">@item.u.UserName</a></h6>
                        </div>
                    </div>
                    <hr>
                    <p class="text-muted">
                        <a href="/Bookmark/Show/@item.b.Id"> @item.b.Title </a>
                    </p>
                    <hr>
                    <div>
                    </div>
                    <div>
                    </div>
                    <div class="d-flex justify-content-around">
                        <div>
                            <form class="form-inline" method="post" action="/Vote/Toggle/@item.b.Id">
                                <button type="submit" class="nav-link btn btn-link text-dark"><i class="fa fa-heart"></i> Like @item.b.rating</button>
                            </form>
                        </div>
                        @*<div>
                    <i class="fa fa-comment"></i>
                    Comments 23
                    </div>*@
                        @if (User.Identity.IsAuthenticated)
                        {
                            <div>
                                @*<button type="button" class="btn btn-primary" data-id="@item.b.Id" data-toggle="modal" data-target="#collectionModal">
                        Add to collection
                        </button>*@
                                <a data-id="@item.b.Id" class="addToCollection" href="#collectionModal" data-toggle="modal">Add to collection</a>
                            </div>
                        }
                    </div>
                </div>
            }
            <hr />
            <hr />
            @foreach (var item in ViewBag.likebkm)
            {

                <div class="box1">
                    <div class="d-flex skfjkk">
                        <div class="pl-2 pt-1">
                            <h6><a href="/User/Bookmarks/@item.u.UserName">@item.u.UserName</a></h6>
                        </div>
                    </div>
                    <hr>
                    <p class="text-muted">
                        <a href="/Bookmark/Show/@item.b.Id"> @item.b.Title </a>
                    </p>
                    <hr>
                    <div>
                    </div>
                    <div>
                    </div>
                    <div class="d-flex justify-content-around">
                        <div>
                            <form class="form-inline" method="post" action="/Vote/Toggle/@item.b.Id">
                                <button type="submit" class="nav-link btn btn-link text-dark"><i class="fa fa-heart"></i> Like @item.b.rating</button>
                            </form>
                        </div>
                        @*<div>
                    <i class="fa fa-comment"></i>
                    Comments 23
                    </div>*@
                        @if (User.Identity.IsAuthenticated)
                        {
                            <div>
                                @*<button type="button" class="btn btn-primary" data-id="@item.b.Id" data-toggle="modal" data-target="#collectionModal">
                        Add to collection
                        </button>*@
                                <a data-id="@item.b.Id" class="addToCollection" href="#collectionModal" data-toggle="modal">Add to collection</a>
                            </div>
                        }
                    </div>
                </div>
            }
            <hr />
            <hr />
            @foreach (var item in ViewBag.lbkm)
            {

                <div class="box1">
                    <div class="d-flex skfjkk">
                        <div class="pl-2 pt-1">
                            <h6><a href="/User/Bookmarks/@item.u.UserName">@item.u.UserName</a></h6>
                        </div>
                    </div>
                    <hr>
                    <p class="text-muted">
                        <a href="/Bookmark/Show/@item.b.Id"> @item.b.Title </a>
                    </p>
                    <hr>
                    <div>
                    </div>
                    <div>
                    </div>
                    <div class="d-flex justify-content-around">
                        <div>
                            <form class="form-inline" method="post" action="/Vote/Toggle/@item.b.Id">
                                <button type="submit" class="nav-link btn btn-link text-dark"><i class="fa fa-heart"></i> Like @item.b.rating</button>
                            </form>
                        </div>
                        @*<div>
                    <i class="fa fa-comment"></i>
                    Comments 23
                    </div>*@
                        @if (User.Identity.IsAuthenticated)
                        {
                            <div>
                                @*<button type="button" class="btn btn-primary" data-id="@item.b.Id" data-toggle="modal" data-target="#collectionModal">
                        Add to collection
                        </button>*@
                                <a data-id="@item.b.Id" class="addToCollection" href="#collectionModal" data-toggle="modal">Add to collection</a>
                            </div>
                        }
                    </div>
                </div>
            }

            @if (User.Identity.IsAuthenticated)
            {
                <div class="modal fade" id="collectionModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Add to collection</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <form class="form-inline" method="POST" action="/CategoryCollection/Add" id="frmAddToCollection">
                                    <input type="hidden" id="addBkm" value="" />
                                    <label for="categories">Category</label>
                                    <input list="categories" id="catSel" name="catSel">
                                    <datalist id="categories">
                                        @foreach (var ccat in ViewBag.ccat)
                                        {
                                            <option value="@ccat.CategoryName" />
                                        }
                                    </datalist>
                                    <button type="submit" id="submitToCollection">Add</button>
                                </form>
                            </div>
                            @*<div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        </div>*@
                        </div>
                    </div>
                </div>
                <script type="text/javascript" src="/lib/jquery/dist/jquery.min.js"></script>
                <script type="text/javascript" src="/js/addToCollection.js"></script>
                <script type="text/javascript">
                    $(document).on("click", ".addToCollection", function () {
                        var bookmarkId = $(this).data("id");
                        $("#collectionModal .modal-body #addBkm").val(bookmarkId);
                    });

                </script>
            }
    </div>
</div>